generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum SpotStatus {
  AVAILABLE
  RESERVED
}

enum TicketKind {
  full
  half
}

enum TicketStatus {
  reserved
  canceled
}

model Events {
  id          String   @id @default(uuid())
  name        String
  description String
  date        DateTime
  price       Float
  created_at  DateTime @default(now())
  updated_at  DateTime @updatedAt

  spot Spots[]
}

model Spots {
  id         String     @id @default(uuid())
  name       String
  status     SpotStatus
  eventId    String
  created_at DateTime   @default(now())
  updated_at DateTime   @updatedAt

  Events             Events               @relation(fields: [eventId], references: [id])
  reservationHistory ReservationHistory[]
  tickets            Tickets?

  @@unique([name])
}

model ReservationHistory {
  id         String     @id @default(uuid())
  email      String
  spotId     String
  ticketKind TicketKind
  createdAt  DateTime   @default(now())
  updatedAt  DateTime   @default(now())

  Spots Spots @relation(fields: [spotId], references: [id])
}

model Tickets {
  id         String     @id @default(uuid())
  email      String
  spotsId    String
  ticketKind TicketKind
  createdAt  DateTime   @default(now())
  updatedAt  DateTime   @default(now())

  Spots Spots @relation(fields: [spotsId], references: [id])

  @@unique([spotsId])
}
